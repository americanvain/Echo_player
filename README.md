# Echo Player

> English version: [README.en.md](./README.en.md)

一个完全基于 AI 的语言学习助手，面向多语种的听读训练，提供“问题定位 + 纠正 + 记录复习”的端到端流程。

## 需求与痛点
- 学习者知道自己卡住，但无法判断是声音、词形、词义、句法还是组合语义层的问题，练习盲目低效。
- 长文本/音频拆分常见重复、遗漏、顺序错位，导致学习体验断裂。
- 传统工具只播音频或给字幕，缺乏即时教学与可追溯记录。
- 多语种场景下，数据准备、TTS、评测、记录分散，无法形成闭环。

## 方案概览
- 在五个处理层面定位问题，给出针对性教学，并保留可复查的学习记录。
- 全链路 AI：PDF 导入 → 句子抽取 → 神经 TTS → 交互式 UI → 教学 Agent → 学习日志。
- 多语种友好：OCR/LLM/TTS 可按语言替换，不局限于英语。

## 全链路五大部分
1) **PDF → TextSegment（后台 Agent）**  
   - 忠实拆分多语种 PDF 为连续的 `segment_id.txt`；段落优先，推荐 300–800 词；禁止跳漏、回退、重复；仅删除页眉页脚/页码/OCR 噪声，不改写。
2) **TextSegment → CandidateSentence**  
   - 按原文顺序抽取句级学习单元；严禁改写、重排或合成；保留依赖上下文的句子与短小片段，便于用户快速跳过。
3) **CandidateSentence → 语音（TTS）**  
   - 为每句生成自然、有情感起伏的语音，支持多语种与语速调节，返回音频路径与时长。
4) **UtteranceUnit（最终输出单元）**  
   - 包含 `unit_id`、`text`、`source_ref`（对应 txt 或未来的时间轴）、`audio.path`、`audio.duration`，用于播放、跟读和对照。
5) **交互学习与记录**  
   - UI 显示文本、录音跟读、五个问题定位按键；侧边栏提供分层诊断、讲解、示例、测试；记录时间线与疑问，生成复习计划。

## 五层问题定位
1. 语音 / 音系：声音→音素、连读/弱读、词边界；错听从句首开始崩。  
2. 词形识别：声音→词条选择；声音听对但选错词。  
3. 词义：多义词义项选择与抑制；不认识词或熟词生义。  
4. 句法解析：主谓宾、修饰、从句/倒装/省略；长句中途结构走偏。  
5. 组合语义：词义 + 句法整合成事件意义；“每个词都懂但整体不对”。

## 界面要点
- 顶部：最近三段文本，保持上下文。
- 左下：录音跟读区，含录音、播放录音、播放原音，可扩展自动发音评分。
- 右下：五个问题定位按键对应五层处理阶段。
- 侧边栏：分层讲解、示例、测试与对话式教学，实时记录。

## AI 优先与扩展性
- OCR/视觉模型读取 PDF（如 Qwen3-VL 等）。
- 多语种 TTS 可替换/并行；未来可加入说话人/情感控制。
- 记录结果可输送给大模型，生成个性化复习或二次训练方案。
- `source_ref` 可扩展到视频时间轴（SRT）或其他多模态素材。

## 数据一致性约束
- 严格顺序：`segment_id` 连续递增，不跳过、不回退、不重复文本。
- 不改写：仅删除页眉页脚/页码/OCR 噪声，禁止推断或添加内容。
- 上下文保护：分批处理并记录进度，下次从上次结束处继续。

## 当前状态
- 处于设计/文档阶段，流程与交互已确定。下一步：落地模型、TTS 方案与 UI 原型。
